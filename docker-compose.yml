services:
    dumbdrop:
        image: dumbwareio/dumbdrop:latest
        ports:
            - 3000:3000
        volumes:
            # Replace "./local_uploads" ( before the colon ) with the path where the files land
            - ./local_uploads:/app/uploads 
        environment:  # Environment variables for the DumbDrop service
            # Explicitly set upload directory inside the container
            UPLOAD_DIR: /app/uploads
            DUMBDROP_TITLE: DumbDrop  # The title shown in the web interface
            MAX_FILE_SIZE: 1024  # Maximum file size in MB
            DUMBDROP_PIN: 123456  # Optional PIN protection (4-10 digits, leave empty to disable)
            AUTO_UPLOAD: true  # Upload without clicking button
            BASE_URL: http://localhost:3000  # The base URL for the application
        
            # Additional available environment variables (commented out with defaults)
            # FOOTER_LINKS: "My Site @ https://example.com,Docs @ https://docs.example.com" # Custom footer links
            # PORT: 3000  # Server port (default: 3000)
            # NODE_ENV: production  # Node environment (development/production)
            # APPRISE_URL: ""  # Apprise notification URL for upload notifications (default: none)
            # APPRISE_MESSAGE: "New file uploaded - {filename} ({size}), Storage used {storage}"  # Notification message template with placeholders: {filename}, {size}, {storage}
            # APPRISE_SIZE_UNIT: "Auto"  # Size unit for notifications (B, KB, MB, GB, TB, or Auto)
            # ALLOWED_EXTENSIONS: ".jpg,.jpeg,.png,.pdf,.doc,.docx,.txt"  # Comma-separated list of allowed file extensions (default: all allowed)
        # healthcheck:
        #     test: ["CMD", "curl", "--fail", "http://localhost:3000/health"]
        #     interval: 30s
        #     timeout: 10s
        #     retries: 3
        #     start_period: 30s